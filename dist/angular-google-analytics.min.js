/**
 * Angular Google Analytics - Easy tracking for your AngularJS application
 * @version v1.1.9-browserify-fix - 2017-01-16
 * @link http://github.com/revolunet/angular-google-analytics
 * @author Julien Bouquillon <julien@revolunet.com> (https://github.com/revolunet)
 * @contributors Julien Bouquillon (https://github.com/revolunet),Justin Saunders (https://github.com/justinsa),Chris Esplin (https://github.com/deltaepsilon),Adam Misiorny (https://github.com/adam187)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(){"use strict";angular.module("angular-google-analytics",[]).provider("Analytics",function(){var a,b,c,d,e,f=!0,g="auto",h=!1,i=!1,j="USD",k=!1,l=!1,m=!1,n=!1,o=!1,p=!1,q=!1,r=!1,s=!1,t=!1,u=!1,v="$routeChangeSuccess",w=!1,x=!1,y=!1,z="",A=!0,B=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(b){return a=angular.isUndefined(b)||b===!1?void 0:angular.isArray(b)?b:angular.isObject(b)?[b]:[{tracker:b,trackEvent:!0}],this},this.trackPages=function(a){return A=!!a,this},this.trackPrefix=function(a){return z=a,this},this.setDomainName=function(a){return c=a,this},this.useDisplayFeatures=function(a){return m=!!a,this},this.useAnalytics=function(a){return f=!!a,this},this.useEnhancedLinkAttribution=function(a){return q=!!a,this},this.useCrossDomainLinker=function(a){return i=!!a,this},this.setCrossLinkDomains=function(a){return b=a,this},this.setPageEvent=function(a){return v=a,this},this.setCookieConfig=function(a){return g=a,this},this.useECommerce=function(a,b){return o=!!a,p=!!b,this},this.setCurrency=function(a){return j=a,this},this.setRemoveRegExp=function(a){return a instanceof RegExp&&(e=a),this},this.setExperimentId=function(a){return d=a,this},this.ignoreFirstPageLoad=function(a){return r=!!a,this},this.trackUrlParams=function(a){return B=!!a,this},this.disableAnalytics=function(a){return n=!!a,this},this.setHybridMobileSupport=function(a){return t=!!a,this},this.startOffline=function(a){return u=!!a,u===!0&&this.delayScriptTag(!0),this},this.delayScriptTag=function(a){return l=!!a,this},this.logAllCalls=function(a){return s=!!a,this},this.enterTestMode=function(){return x=!0,this},this.enterDebugMode=function(a){return k=!0,y=!!a,this},this.readFromRoute=function(a){return w=!!a,this},this.$get=["$document","$location","$log","$rootScope","$window","$injector",function(C,D,E,F,G,H){var I=this,J=function(a,b){return angular.isObject(b)&&angular.isDefined(b[a])},K=function(a,b,c){return J(a,b)&&b[a]===c},L=function(a,b){return angular.isString(b)?b+"."+a:J("name",b)?b.name+"."+a:a},M={};w&&(H.has("$route")?M=H.get("$route"):E.warn("$route service is not available. Make sure you have included ng-route in your application dependencies."));var N=function(){if(w&&M.current&&"pageTrack"in M.current)return M.current.pageTrack;var a=B?D.url():D.path();return e?a.replace(e,""):a},O=function(){var a={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},b={};return angular.forEach(D.search(),function(c,d){var e=a[d];angular.isDefined(e)&&(b[e]=c)}),b},P=function(a,b,c,d,e,f,g,h,i){var j={};return a&&(j.id=a),b&&(j.affiliation=b),c&&(j.revenue=c),d&&(j.tax=d),e&&(j.shipping=e),f&&(j.coupon=f),g&&(j.list=g),h&&(j.step=h),i&&(j.option=i),j},Q=function(a,b){var c="",d="https:"===document.location.protocol,e="chrome-extension:"===document.location.protocol,g=f===!0&&t===!0;return a=angular.isString(a)?a:"",b=angular.isString(b)?b:"",""!==a&&(c="http:"+a),(e||g||d&&""!==b)&&(c="https:"+b),c},R=function(a){!f&&G._gaq&&"function"==typeof a&&a()},S=function(){var a=Array.prototype.slice.call(arguments);return u===!0?void I.offlineQueue.push([S,a]):(G._gaq||(G._gaq=[]),s===!0&&I._log.apply(I,a),void G._gaq.push(a))},T=function(a){f&&G.ga&&"function"==typeof a&&a()},U=function(){var a=Array.prototype.slice.call(arguments);return u===!0?void I.offlineQueue.push([U,a]):"function"!=typeof G.ga?void I._log("warn","ga function not set on window"):(s===!0&&I._log.apply(I,a),void G.ga.apply(null,a))},V=function(b){var c=Array.prototype.slice.call(arguments,1),d=c[0],e=[];return"function"==typeof b?a.forEach(function(a){b(a)&&e.push(a)}):e=a,0===e.length?void U.apply(I,c):void e.forEach(function(a){J("select",a)&&"function"==typeof a.select&&!a.select(c)||(c[0]=L(d,a),U.apply(I,c))})};return this._log=function(){var a=Array.prototype.slice.call(arguments);if(a.length>0){if(a.length>1)switch(a[0]){case"debug":case"error":case"info":case"log":case"warn":E[a[0]](a.slice(1))}I.log.push(a)}},this._createScriptTag=function(){I._registerScriptTags(),I._registerTrackers()},this._createAnalyticsScriptTag=function(){I._registerScriptTags(),I._registerTrackers()},this._registerScriptTags=function(){var b,c=C[0],e=Q();if(h===!0)return void I._log("warn","Script tags already created");if(n===!0&&a.forEach(function(a){I._log("info","Analytics disabled: "+a.tracker),G["ga-disable-"+a.tracker]=!0}),f===!0){if(b=e+"//www.google-analytics.com/"+(k?"analytics_debug.js":"analytics.js"),x!==!0?!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,c,"script",b,"ga"):("function"!=typeof G.ga&&(G.ga=function(){}),I._log("inject",b)),y&&(G.ga_debug={trace:!0}),d){var g=c.createElement("script"),i=c.getElementsByTagName("script")[0];g.src=e+"//www.google-analytics.com/cx/api.js?experiment="+d,i.parentNode.insertBefore(g,i)}}else b=Q("//www","//ssl")+".google-analytics.com/ga.js",m===!0&&(b=e+"//stats.g.doubleclick.net/dc.js"),x!==!0?!function(){var a=c.createElement("script");a.type="text/javascript",a.async=!0,a.src=b;var d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(a,d)}():I._log("inject",b);return h=!0,!0},this._registerTrackers=function(){return!a||a.length<1?void I._log("warn","No accounts to register"):(f===!0?a.forEach(function(a){a.crossDomainLinker=J("crossDomainLinker",a)?a.crossDomainLinker:i,a.crossLinkDomains=J("crossLinkDomains",a)?a.crossLinkDomains:b,a.displayFeatures=J("displayFeatures",a)?a.displayFeatures:m,a.enhancedLinkAttribution=J("enhancedLinkAttribution",a)?a.enhancedLinkAttribution:q,a.set=J("set",a)?a.set:{},a.trackEcommerce=J("trackEcommerce",a)?a.trackEcommerce:o,a.trackEvent=!!J("trackEvent",a)&&a.trackEvent;var c={};J("fields",a)?c=a.fields:J("cookieConfig",a)?angular.isString(a.cookieConfig)?c.cookieDomain=a.cookieConfig:c=a.cookieConfig:angular.isString(g)?c.cookieDomain=g:g&&(c=g),a.crossDomainLinker===!0&&(c.allowLinker=!0),J("name",a)&&(c.name=a.name),a.fields=c,U("create",a.tracker,a.fields),t===!0&&U(L("set",a),"checkProtocolTask",null);for(var d in a.set)a.set.hasOwnProperty(d)&&U(L("set",a),d,a.set[d]);a.crossDomainLinker===!0&&(U(L("require",a),"linker"),angular.isDefined(a.crossLinkDomains)&&U(L("linker:autoLink",a),a.crossLinkDomains)),a.displayFeatures&&U(L("require",a),"displayfeatures"),a.trackEcommerce&&(p?(U(L("require",a),"ec"),U(L("set",a),"&cu",j)):U(L("require",a),"ecommerce")),a.enhancedLinkAttribution&&U(L("require",a),"linkid"),A&&!r&&U(L("send",a),"pageview",z+N())}):(a.length>1&&(I._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),a=a.slice(0,1)),S("_setAccount",a[0].tracker),c&&S("_setDomainName",c),q&&S("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),A&&!r&&(e?S("_trackPageview",N()):S("_trackPageview"))),!0)},this._ecommerceEnabled=function(a,b){var c=o&&!p;return a===!0&&c===!1&&(o&&p?I._log("warn",b+" is not available when Enhanced Ecommerce is enabled with analytics.js"):I._log("warn","Ecommerce must be enabled to use "+b+" with analytics.js")),c},this._enhancedEcommerceEnabled=function(a,b){var c=o&&p;return a===!0&&c===!1&&I._log("warn","Enhanced Ecommerce must be enabled to use "+b+" with analytics.js"),c},this._trackPage=function(a,b,c){a=a?a:N(),b=b?b:C[0].title,R(function(){S("_set","title",b),S("_trackPageview",z+a)}),T(function(){var d={page:z+a,title:b};angular.extend(d,O()),angular.isObject(c)&&angular.extend(d,c),V(void 0,"send","pageview",d)})},this._trackEvent=function(a,b,c,d,e,f){R(function(){S("_trackEvent",a,b,c,d,!!e)}),T(function(){var g={},h=function(a){return K("trackEvent",a,!0)};angular.isDefined(e)&&(g.nonInteraction=!!e),angular.isObject(f)&&angular.extend(g,f),angular.isDefined(g.page)||(g.page=N()),V(h,"send","event",a,b,c,d,g)})},this._addTrans=function(a,b,c,d,e,f,g,h,i){R(function(){S("_addTrans",a,b,c,d,e,f,g,h)}),T(function(){if(I._ecommerceEnabled(!0,"addTrans")){var f=function(a){return K("trackEcommerce",a,!0)};V(f,"ecommerce:addTransaction",{id:a,affiliation:b,revenue:c,tax:d,shipping:e,currency:i||"USD"})}})},this._addItem=function(a,b,c,d,e,f){R(function(){S("_addItem",a,b,c,d,e,f)}),T(function(){if(I._ecommerceEnabled(!0,"addItem")){var g=function(a){return K("trackEcommerce",a,!0)};V(g,"ecommerce:addItem",{id:a,name:c,sku:b,category:d,price:e,quantity:f})}})},this._trackTrans=function(){R(function(){S("_trackTrans")}),T(function(){if(I._ecommerceEnabled(!0,"trackTrans")){var a=function(a){return K("trackEcommerce",a,!0)};V(a,"ecommerce:send")}})},this._clearTrans=function(){T(function(){if(I._ecommerceEnabled(!0,"clearTrans")){var a=function(a){return K("trackEcommerce",a,!0)};V(a,"ecommerce:clear")}})},this._addProduct=function(a,b,c,d,e,f,g,h,i,j){R(function(){S("_addProduct",a,b,c,d,e,f,g,h,i)}),T(function(){if(I._enhancedEcommerceEnabled(!0,"addProduct")){var k=function(a){return K("trackEcommerce",a,!0)},l={id:a,name:b,category:c,brand:d,variant:e,price:f,quantity:g,coupon:h,position:i};angular.isObject(j)&&angular.extend(l,j),V(k,"ec:addProduct",l)}})},this._addImpression=function(a,b,c,d,e,f,g,h){R(function(){S("_addImpression",a,b,c,d,e,f,g,h)}),T(function(){if(I._enhancedEcommerceEnabled(!0,"addImpression")){var i=function(a){return K("trackEcommerce",a,!0)};V(i,"ec:addImpression",{id:a,name:b,category:e,brand:d,variant:f,list:c,position:g,price:h})}})},this._addPromo=function(a,b,c,d){R(function(){S("_addPromo",a,b,c,d)}),T(function(){if(I._enhancedEcommerceEnabled(!0,"addPromo")){var e=function(a){return K("trackEcommerce",a,!0)};V(e,"ec:addPromo",{id:a,name:b,creative:c,position:d})}})},this._setAction=function(a,b){R(function(){S("_setAction",a,b)}),T(function(){if(I._enhancedEcommerceEnabled(!0,"setAction")){var c=function(a){return K("trackEcommerce",a,!0)};V(c,"ec:setAction",a,b)}})},this._trackTransaction=function(a,b,c,d,e,f,g,h,i){this._setAction("purchase",P(a,b,c,d,e,f,g,h,i))},this._trackRefund=function(a){this._setAction("refund",P(a))},this._trackCheckOut=function(a,b){this._setAction("checkout",P(null,null,null,null,null,null,null,a,b))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(a,b){["add","remove"].indexOf(a)!==-1&&(this._setAction(a,{list:b}),this._trackEvent("UX","click",a+("add"===a?" to cart":" from cart")))},this._promoClick=function(a){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",a)},this._productClick=function(a){this._setAction("click",P(null,null,null,null,null,null,a,null,null)),this._trackEvent("UX","click",a)},this._pageView=function(a){T(function(){U(L("send",a),"pageview")})},this._send=function(){var a=Array.prototype.slice.call(arguments);a.unshift("send"),T(function(){U.apply(I,a)})},this._set=function(a,b,c){T(function(){U(L("set",c),a,b)})},this._trackTimings=function(a,b,c,d){T(function(){V(void 0,"send","timing",a,b,c,d)})},this._trackException=function(a,b){T(function(){V(void 0,"send","exception",{exDescription:a,exFatal:!!b})})},l||(this._registerScriptTags(),this._registerTrackers()),A&&F.$on(v,function(){(!w||M.current&&M.current.templateUrl&&!M.current.doNotTrack)&&I._trackPage()}),{log:I.log,offlineQueue:I.offlineQueue,configuration:{accounts:a,universalAnalytics:f,crossDomainLinker:i,crossLinkDomains:b,currency:j,debugMode:k,delayScriptTag:l,disableAnalytics:n,displayFeatures:m,domainName:c,ecommerce:I._ecommerceEnabled(),enhancedEcommerce:I._enhancedEcommerceEnabled(),enhancedLinkAttribution:q,experimentId:d,hybridMobileSupport:t,ignoreFirstPageLoad:r,logAllCalls:s,pageEvent:v,readFromRoute:w,removeRegExp:e,testMode:x,traceDebuggingMode:y,trackPrefix:z,trackRoutes:A,trackUrlParams:B},getUrl:N,setCookieConfig:function(a){return I._log("warn","DEPRECATION WARNING: setCookieConfig method is deprecated. Please use tracker fields instead."),I._setCookieConfig.apply(I,arguments)},getCookieConfig:function(){return I._log("warn","DEPRECATION WARNING: getCookieConfig method is deprecated. Please use tracker fields instead."),g},createAnalyticsScriptTag:function(a){return I._log("warn","DEPRECATION WARNING: createAnalyticsScriptTag method is deprecated. Please use registerScriptTags and registerTrackers methods instead."),a&&(g=a),I._createAnalyticsScriptTag()},createScriptTag:function(){return I._log("warn","DEPRECATION WARNING: createScriptTag method is deprecated. Please use registerScriptTags and registerTrackers methods instead."),I._createScriptTag()},registerScriptTags:function(){return I._registerScriptTags()},registerTrackers:function(){return I._registerTrackers()},offline:function(a){if(a===!0&&u===!1&&(u=!0),a===!1&&u===!0)for(u=!1;I.offlineQueue.length>0;){var b=I.offlineQueue.shift();b[0].apply(I,b[1])}return u},trackPage:function(a,b,c){I._trackPage.apply(I,arguments)},trackEvent:function(a,b,c,d,e,f){I._trackEvent.apply(I,arguments)},addTrans:function(a,b,c,d,e,f,g,h,i){I._addTrans.apply(I,arguments)},addItem:function(a,b,c,d,e,f){I._addItem.apply(I,arguments)},trackTrans:function(){I._trackTrans.apply(I,arguments)},clearTrans:function(){I._clearTrans.apply(I,arguments)},addProduct:function(a,b,c,d,e,f,g,h,i,j){I._addProduct.apply(I,arguments)},addPromo:function(a,b,c,d){I._addPromo.apply(I,arguments)},addImpression:function(a,b,c,d,e,f,g,h){I._addImpression.apply(I,arguments)},productClick:function(a){I._productClick.apply(I,arguments)},promoClick:function(a){I._promoClick.apply(I,arguments)},trackDetail:function(){I._trackDetail.apply(I,arguments)},trackCart:function(a,b){I._trackCart.apply(I,arguments)},trackCheckout:function(a,b){I._trackCheckOut.apply(I,arguments)},trackTimings:function(a,b,c,d){I._trackTimings.apply(I,arguments)},trackTransaction:function(a,b,c,d,e,f,g,h,i){I._trackTransaction.apply(I,arguments)},trackException:function(a,b){I._trackException.apply(I,arguments)},setAction:function(a,b){I._setAction.apply(I,arguments)},pageView:function(){I._pageView.apply(I,arguments)},send:function(a){I._send.apply(I,arguments)},set:function(a,b,c){I._set.apply(I,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(a,b){return{restrict:"A",link:function(c,d,e){var f=b(e.gaTrackEvent);d.bind("click",function(){e.gaTrackEventIf&&!c.$eval(e.gaTrackEventIf)||f.length>1&&a.trackEvent.apply(a,f(c))})}}}])}();